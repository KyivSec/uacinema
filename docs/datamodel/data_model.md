≈# Data model – UACinema (моделювання даних)

У цьому документі моделюємо дані для веб-сайту з українськими фільмами UACinema.  
Ми виділяємо основні сутності, їх атрибути та типи даних на основі user stories та готової ER-діаграми.

---

## 1. Ключові user stories

На основі беклогу проєкту ми використовуємо такі базові сценарії:

1. **Реєстрація та авторизація**
   - Як користувач, хочемо реєструватися на сайті та входити під своїм акаунтом.
   - Залучена сутність: `User`.

2. **Перегляд каталогу українських фільмів**
   - Як користувач, хочемо переглядати список українських фільмів та відкривати сторінку конкретного фільму.
   - Залучена сутність: `Movie`.

3. **Залишення відгуків**
   - Як користувач, хочемо виставляти оцінку та писати текстовий відгук до фільму.
   - Залучені сутності: `User`, `Movie`, `Review`.

4. **Список “Подивись потім”**
   - Як користувач, хочемо додавати фільми у власний список “Подивись потім”.
   - Залучені сутності: `User`, `Movie`, `WatchLater`.

5. **Список “Улюблене”**
   - Як користувач, хочемо формувати список “Улюблене” з найкращих фільмів.
   - Залучені сутності: `User`, `Movie`, `Favorite`.

На основі цих історій ми формуємо набір сутностей:
**User, Movie, Review, WatchLater, Favorite.**

---

## 2. Таблиця сутностей та атрибутів

Далі ми фіксуємо сутності та їх атрибути у вигляді таблиць.  
Позначення: **PK** – первинний ключ, **FK** – зовнішній ключ.

### 2.1. User (Користувач)

| Атрибут        | Тип даних | Опис                                    | Примітка |
|----------------|-----------|-----------------------------------------|----------|
| `id`           | int       | Унікальний ідентифікатор користувача.  | **PK**   |
| `email`        | string    | Електронна пошта користувача.          | має бути унікальною |
| `password_hash`| string    | Хеш пароля користувача.                | зберігаємо тільки хеш |
| `role`         | string    | Роль у системі (`user`, `admin` тощо). |         |
| `created_at`   | datetime  | Дата та час створення облікового запису.|        |

### 2.2. Movie (Фільми)

| Атрибут        | Тип даних | Опис                                          | Примітка |
|----------------|-----------|-----------------------------------------------|----------|
| `id`           | int       | Внутрішній ідентифікатор фільму.             | **PK**   |
| `title`        | string    | Назва фільму.                                |          |
| `description`  | string    | Короткий опис / сюжет фільму.                |          |
| `release_date` | datetime  | Дата релізу фільму.                          |          |
| `tmdb_id`      | string    | Ідентифікатор фільму в TMDB API.             |          |
| `rating`       | float     | Середній рейтинг фільму (наприклад, 0.0–10).|          |
| `poster_url`   | string    | URL-посилання на постер фільму.              |          |

### 2.3. Review (Відгук)

У концептуальній ER-діаграмі `Review` складається з трьох атрибутів, а зв’язки з `User` та `Movie` позначаються окремими зв’язками 1:N.

| Атрибут    | Тип даних | Опис                                        | Примітка |
|------------|-----------|---------------------------------------------|----------|
| `id`       | int       | Унікальний ідентифікатор відгуку.          | **PK**   |
| `rating`   | float     | Оцінка фільму, виставлена користувачем.    |          |
| `comments` | string    | Текстовий коментар користувача до фільму.  |          |

> На ER-діаграмі зв’язки `User — Review` та `Movie — Review` представлені як 1:N.  
> У фізичній моделі БД ці зв’язки будуть реалізовані через зовнішні ключі (наприклад, `user_id`, `movie_id`), але в даному документі ми фіксуємо саме набір атрибутів, зображений на діаграмі.

### 2.4. WatchLater (Подивись потім)

`WatchLater` є сутністю-зв’язком, яка реалізує відношення **M:N** між `User` та `Movie` для списку “подивитись потім”.

| Атрибут    | Тип даних | Опис                                           | Примітка    |
|------------|-----------|------------------------------------------------|-------------|
| `user_id`  | int       | Посилання на користувача, який створив запис. | **FK → User**  |
| `movie_id` | int       | Посилання на фільм зі списку “Подивись потім”.| **FK → Movie** |

### 2.5. Favorite (Улюблене)

`Favorite` аналогічно реалізує відношення **M:N** між `User` та `Movie`, але вже для списку улюблених фільмів.

| Атрибут    | Тип даних | Опис                                             | Примітка    |
|------------|-----------|--------------------------------------------------|-------------|
| `user_id`  | int       | Посилання на користувача, який додав фільм.     | **FK → User**  |
| `movie_id` | int       | Посилання на фільм, позначений як улюблений.    | **FK → Movie** |

---

## 3. Висновок

У цьому документі ми:

- на основі user stories виділяємо п’ять основних сутностей: `User`, `Movie`, `Review`, `WatchLater`, `Favorite`;
- для кожної сутності фіксуємо атрибути та типи даних відповідно до готової ER-діаграми;
- розуміємо, що сутності `WatchLater` та `Favorite` виконують роль зв’язкових таблиць для реалізації відношення **M:N** між `User` та `Movie`.

Ця модель даних далі використовується для побудови ER-діаграми (`docs/data_model/er_diagram.*`) та інтегрується з архітектурою проєкту (Frontend–Backend–Database).

